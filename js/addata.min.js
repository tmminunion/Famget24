import{listacara}from"./modul/listacara.js";import{initializeApp}from"https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";import{getDatabase,ref,onValue}from"https://www.gstatic.com/firebasejs/10.14.1/firebase-database.js";import{firebaseConfig}from"./modul/FirebaseConfig.js";import{getPar,createGradient}from"./modul/allfungction.js";import{fetchData}from"./modul/fetchData.js";import{fetchDataline}from"./modul/grafikLine.js";import{updateChart,updateDonutChart}from"./modul/grafikbus.js";const app=initializeApp(firebaseConfig),db=getDatabase(app),Acara=getPar("acara")||1,starCountRef=ref(db,"Famgetabsensi/"+Acara);Acara>=0&&Acara<listacara.length?(document.getElementById("judulna").textContent=listacara[Acara],document.getElementById("judulna2").textContent=listacara[Acara]):document.getElementById("judulna").textContent="Acara tidak ditemukan.",onValue(starCountRef,t=>{const e=t.val();console.log(e);const a=document.getElementById("dataBody");a.innerHTML="";let n=1;const r=[],s=[];let o=0,d=0;for(const t in e)if(e.hasOwnProperty(t)){var c=parseInt(e[t].Sudah),m=parseInt(e[t].Belum),i=m+c,l=c/i*100,u=parseInt(l),p=100-u;r.push(u),s.push(p),o+=parseInt(e[t].Sudah),d+=parseInt(e[t].Belum);const f=e[t],g=`<tr><td class="text-center">${n}</td><td class="text-center">${f.Nama}</td><td class="text-center">${f.Sum}</td><td class="text-center">${f.Peserta}</td><td class="text-center">${f.Sudah}</td><td class="text-center">${f.Belum}</td><td class="text-center">${u}%</td><td class="text-center"><a href="absensibus.html?acara=${Acara}&data=${t}" class="btn btn-primary btn-sm">Lihat</a></td></tr>`;a.insertAdjacentHTML("beforeend",g),n++}var f=o+d,g=o/f*100,b=document.getElementById("absentotal");b.textContent=f;var h=document.getElementById("data_masuk");h.textContent=o;var x=document.getElementById("data_belum");x.textContent=d;var C=document.getElementById("data_persen");C.textContent=g.toFixed(2)+"%",updateDonutChart(o,d),updateChart(r,s),fetchData(),fetchDataline()});